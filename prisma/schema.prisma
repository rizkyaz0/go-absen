datasource db {
  provider = "mysql" // Sesuaikan dengan database Anda: mysql, postgresql, sqlite
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// Tabel role karyawan
model Role {
  id        Int     @id @default(autoincrement())
  name      String  @unique
  users     User[]
}

// Tabel status (aktif, nonaktif, cuti, dll)
model Status {
  id        Int     @id @default(autoincrement())
  name      String  @unique
  users     User[]
}

// Data karyawan
model User {
  id        Int       @id @default(autoincrement())
  name      String
  email     String    @unique
  password  String
  roleId    Int
  statusId  Int
  role      Role      @relation(fields: [roleId], references: [id])
  status    Status    @relation(fields: [statusId], references: [id])
  absences  Absence[]
  leaveRequests LeaveRequest[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

// Tabel shift / jadwal kerja
model Shift {
  id        Int       @id @default(autoincrement())
  name      String
  startTime DateTime
  endTime   DateTime
  absences  Absence[]
}

// Absensi harian
model Absence {
  id        Int       @id @default(autoincrement())
  userId    Int
  shiftId   Int?
  date      DateTime
  checkIn   DateTime?
  checkOut  DateTime?
  status    String    // Hadir, Izin, Sakit, Alpha
  location  String?   // Opsional: GPS / kantor cabang
  note      String?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  user      User      @relation(fields: [userId], references: [id])
  shift     Shift?    @relation(fields: [shiftId], references: [id])
}

// Permintaan cuti / izin
model LeaveRequest {
  id         Int       @id @default(autoincrement())
  userId     Int
  startDate  DateTime
  endDate    DateTime
  type       String    // Cuti, Izin, Sakit
  status     String    // Pending, Approved, Rejected
  reason     String?
  approvedBy Int?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  user       User      @relation(fields: [userId], references: [id])
}
